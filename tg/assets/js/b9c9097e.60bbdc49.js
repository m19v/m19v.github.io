"use strict";(self.webpackChunkm_19_v=self.webpackChunkm_19_v||[]).push([[3061],{2513:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"notes/software-engineering/quarkus","title":"Quarkus","description":"What is Quarkus?","source":"@site/docs/notes/software-engineering/quarkus.md","sourceDirName":"notes/software-engineering","slug":"/notes/software-engineering/quarkus","permalink":"/tg/docs/notes/software-engineering/quarkus","draft":false,"unlisted":false,"editUrl":"https://github.com/m19v/m19v.github.io/blob/main/docs/notes/software-engineering/quarkus.md","tags":[],"version":"current","lastUpdatedBy":"m19v","lastUpdatedAt":1761828399000,"frontMatter":{"title":"Quarkus"},"sidebar":"tutorialSidebar","previous":{"title":"Python","permalink":"/tg/docs/notes/software-engineering/python"},"next":{"title":"Terraform","permalink":"/tg/docs/notes/software-engineering/terraform"}}');var r=i(4848),a=i(8453);const l={title:"Quarkus"},t=void 0,c={},o=[{value:"What is Quarkus?",id:"what-is-quarkus",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"Development environment",id:"development-environment",level:3},{value:"Bootstraping Quarkus Application",id:"bootstraping-quarkus-application",level:3},{value:"Developer Joy",id:"developer-joy",level:3},{value:"CDI",id:"cdi",level:2},{value:"Quarkus Test",id:"quarkus-test",level:2},{value:"Unit Test",id:"unit-test",level:3},{value:"Integration Test",id:"integration-test",level:3},{value:"Testing frameworks",id:"testing-frameworks",level:3},{value:"Quarkus configuration",id:"quarkus-configuration",level:2},{value:"Config Sources",id:"config-sources",level:3},{value:"MicroProfile configuration",id:"microprofile-configuration",level:3},{value:"MicroProfile configuration APIs",id:"microprofile-configuration-apis",level:3},{value:"Configuration Profiles",id:"configuration-profiles",level:3},{value:"Packaging Application",id:"packaging-application",level:2},{value:"Types of Executable JARs",id:"types-of-executable-jars",level:3},{value:"Building Native Executables",id:"building-native-executables",level:3},{value:"Containerizing Quarkus Application",id:"containerizing-quarkus-application",level:2},{value:"Containerize Executable JARs with Docker",id:"containerize-executable-jars-with-docker",level:3},{value:"Containerizing Linux Native Executables",id:"containerizing-linux-native-executables",level:3},{value:"Commands",id:"commands",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"what-is-quarkus",children:"What is Quarkus?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Quarkus is a Java framework tailored for deployment on Kubernetes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,r.jsx)(n.h3,{id:"development-environment",children:"Development environment"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Install OpenJDKa","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"At least Java 11 (Quarkus is compatable with Java 8)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Install GraalVM","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Extension of JVM"}),"\n",(0,r.jsx)(n.li,{children:"Comes as separated bundle"}),"\n",(0,r.jsx)(n.li,{children:"Creates native banaries"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["IDE","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"IntelliJ IDEA"}),"\n",(0,r.jsx)(n.li,{children:"VS Code"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Build Tools","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Gradle"}),"\n",(0,r.jsxs)(n.li,{children:["Maven","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Quarkus maven plugin"}),"\n",(0,r.jsx)(n.li,{children:"Quarkus BOM"}),"\n",(0,r.jsxs)(n.li,{children:["pom.xml","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configures Quarkus BOM"}),"\n",(0,r.jsx)(n.li,{children:"Describes Quarkus extension"}),"\n",(0,r.jsx)(n.li,{children:"Defines Quarkus plugin"}),"\n",(0,r.jsx)(n.li,{children:"Native profile"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Docker","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Package application as an image"}),"\n",(0,r.jsx)(n.li,{children:"Execute image inside container"}),"\n",(0,r.jsx)(n.li,{children:"Docker extension for Quarkus"}),"\n",(0,r.jsx)(n.li,{children:"Bootstrap application has set of Dockerfiles"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bootstraping-quarkus-application",children:"Bootstraping Quarkus Application"}),"\n",(0,r.jsx)(n.p,{children:"Options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://code.quarkus.io/",children:"Configure Quarkus Application"})}),"\n",(0,r.jsxs)(n.li,{children:["Quarkus Maven plugin:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'mvn -U io.quarkus:quarkus-maven-plugin:create \\\n-DprojectGroupId=de.m19v.quarkus.starting \\\n-DprojectArtifactId=rest-book \\\n-DclassName="de.m19v.quarkus.Starting.BookResource" \\\n-Dpath="/api/books" \\\n-Dextensions="resteasy-jsonb"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"developer-joy",children:"Developer Joy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hot reload"}),"\n",(0,r.jsx)(n.li,{children:"Update a java file or resource"}),"\n",(0,r.jsx)(n.li,{children:"Quarkus is reloaded"}),"\n",(0,r.jsx)(n.li,{children:"No need to stop and restart"}),"\n",(0,r.jsx)(n.li,{children:"Development vs production mode"}),"\n",(0,r.jsx)(n.li,{children:"Unified configuration (e.g. application.properties)"}),"\n",(0,r.jsx)(n.li,{children:"Integration with IDE"}),"\n",(0,r.jsx)(n.li,{children:"Debugging"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cdi",children:"CDI"}),"\n",(0,r.jsx)(n.h2,{id:"quarkus-test",children:"Quarkus Test"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Tests in JVM mand Native mode","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Integrates with JUnit"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@QuarkusTest"})," annotation"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Starts Quarkus (on port 8081)"}),"\n",(0,r.jsx)(n.li,{children:"Executes the test suit"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"unit-test",children:"Unit Test"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Test on class in isolation"}),"\n",(0,r.jsx)(n.li,{children:"No container services"}),"\n",(0,r.jsx)(n.li,{children:"Mock container services if needed"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"integration-test",children:"Integration Test"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Test one or several classes interacting together"}),"\n",(0,r.jsx)(n.li,{children:"Container services are up and running"}),"\n",(0,r.jsx)(n.li,{children:"No need to mock container services"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"testing-frameworks",children:"Testing frameworks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["JUnit","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Quarkus supports JUnit 5 (JUnit 4 is deprecated)"}),"\n",(0,r.jsx)(n.li,{children:"No TestNG support"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["RESTAssured","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open-source Java library"}),"\n",(0,r.jsx)(n.li,{children:"Domain Specific Language (DSL)"}),"\n",(0,r.jsx)(n.li,{children:"Write tests for RESTful API"}),"\n",(0,r.jsx)(n.li,{children:"Invokes APIs and validates the response"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quarkus-configuration",children:"Quarkus configuration"}),"\n",(0,r.jsx)(n.h3,{id:"config-sources",children:"Config Sources"}),"\n",(0,r.jsxs)(n.p,{children:["By default, Quarkus reads configuration properties from multiple sources (by descending ordinal), see ",(0,r.jsx)(n.a,{href:"https://quarkus.io/guides/config-reference",children:"config Sources"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"System properties"}),"\n",(0,r.jsx)(n.li,{children:"Environment variables"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".env"})," file in the current working directory"]}),"\n",(0,r.jsxs)(n.li,{children:["Quarkus Application configuration file in ",(0,r.jsx)(n.code,{children:"$PWD/config/application.properties"})]}),"\n",(0,r.jsxs)(n.li,{children:["Quarkus Application configuration file ",(0,r.jsx)(n.code,{children:"application.properties"})," in classpath"]}),"\n",(0,r.jsxs)(n.li,{children:["MicroProfile Config configuration file ",(0,r.jsx)(n.code,{children:"META-INF/microprofile-config.properties"})," in classpath"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"microprofile-configuration",children:"MicroProfile configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://microprofile.io/",children:"MicroProfile specification"})}),"\n",(0,r.jsxs)(n.li,{children:["Configuration from multiple sources","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"application.properties"}),"\n",(0,r.jsx)(n.li,{children:"command line parameters"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Possibility to use dependency injection or lookup to get configuration"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"microprofile-configuration-apis",children:"MicroProfile configuration APIs"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"API"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"@ConfigProperty"}),(0,r.jsx)(n.td,{children:"Binds the injection point with a configured value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ConfigProvider"}),(0,r.jsx)(n.td,{children:"Central class to access a Config"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Config"}),(0,r.jsx)(n.td,{children:"Resolves the property value by searching through all the configuration sources"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ConfigSource"}),(0,r.jsx)(n.td,{children:"Provides configuration values from a specific place"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Converter"}),(0,r.jsx)(n.td,{children:"Converts a configured values from a String to a Java type"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-profiles",children:"Configuration Profiles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Multiple configurations in same file"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Possibility to select profiles via profile name"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Syntax ",(0,r.jsx)(n.code,{children:"%<profile_name>"})," in ",(0,r.jsx)(n.code,{children:"application.properties"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Quarkus has built-in three profiles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"%dev"}),": ",(0,r.jsx)(n.code,{children:"mvn quarkus:dev"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"%test"}),": ",(0,r.jsx)(n.code,{children:"mvn test"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"%prod"}),": ",(0,r.jsx)(n.code,{children:"java -jar"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"%staging"}),": ",(0,r.jsx)(n.code,{children:"mvn quarkus:dev -Dquarkus.profile=staging"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"%dev.quarkus.log.console.level=DEBUG\n%test.quarkus.log.console.level=TRACE\n%prod.quarkus.log.console.level=SEVERE\n\n%staging.quarkus.log.console.level=INFO\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"packaging-application",children:"Packaging Application"}),"\n",(0,r.jsx)(n.h3,{id:"types-of-executable-jars",children:"Types of Executable JARs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JAR (a.k.a Fast-JAR) bundles code, dependencies, quarkus runtime and index to speed up classpath scanning"}),"\n",(0,r.jsx)(n.li,{children:"Legacy JAR (a.k.a JAR) packages the application code and the quarkus runtime"}),"\n",(0,r.jsx)(n.li,{children:"Uber-JAR (a.k.a. Fat-JAR) contains all the classes of all dependencies"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"JARs created by maven packages the code. JARs created by Quarkus packages code, dependencies and quarkus runtime"}),"\n",(0,r.jsx)(n.h3,{id:"building-native-executables",children:"Building Native Executables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Executable JARs container bytecode and need JVM to run"}),"\n",(0,r.jsxs)(n.li,{children:["Native images contain binary and the needed JVM is bundled inside (not the whole JVM but what quarkus application uses with the help of GraalVM)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compilation is resource intensive"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"containerizing-quarkus-application",children:"Containerizing Quarkus Application"}),"\n",(0,r.jsxs)(n.p,{children:["Quarkus provides extensions for building (and pushing) ",(0,r.jsx)(n.a,{href:"https://quarkus.io/guides/container-image",children:"container images"}),". Currently, it supports:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Jib"}),"\n",(0,r.jsx)(n.li,{children:"Docker"}),"\n",(0,r.jsx)(n.li,{children:"OpenShift"}),"\n",(0,r.jsx)(n.li,{children:"Buildpack"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"containerize-executable-jars-with-docker",children:"Containerize Executable JARs with Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'mvn quarkus:add-extension -Dextensions="container-image-docker"\nmvn package -Dquarkus.container-image.build=true -Dquarkus.package.type=jar -Dquarkus.container-image.tag=jvm\nmvn package -Dquarkus.container-image.build=true -Dquarkus.package.type=legacy-jar\n\ndocker run -i --rm -p 8080:8080 m19v/rest-book:jvm\n'})}),"\n",(0,r.jsx)(n.h3,{id:"containerizing-linux-native-executables",children:"Containerizing Linux Native Executables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mvn package -Dquarkus.container-image.build=true \\\n            -Dquarkus.package.type=native \\\n            -Dquarkus.native.remote-container-build=true \\\n            -Dquarkus.container-image.tag=native\n\ndocker run -i --rm -p 8080:8080 m19v/rest-book:native\n"})}),"\n",(0,r.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Run application\nmvn quarkus:dev                                  # Run application in development mode\nmvn quarkus:dev -Dsuspend                        # Run application in development mode and suspend until a debugger is connected\n\n\n# Override configuration\nmvn quarkus:dev -Dkey.of.conf="Value-of-conf"    # Override configuration in dev mode\nmvn test -Dkey.of.conf="Value-of-conf"           # Override configuration in test mode\n\n\n# Packaging JARs\nmvn package                                      # package application in Fast-JAR file (DEFAULT)\nmvn package -Dquarkus.package.type=jar           # package application in Fast-JAR file\nmvn package -Dquarkus.package.type=legacy-jar    # package application in Legacy-JAR file\nmvn package -Dquarkus.package.type=uber-jar      # package application in Fat-JAR file\n\nmvn package -Dquarkus.package.type=native        # package application in native image format\nmvn package -Pnative                             # package application in native image format\n\n\n# Executing JARs\njava -jar target/quarkus-app/quarkus-run.jar     # Execute JAR application (with %prod profile)\n./target/rest-book-runner                        # Execute Native Executable\n\n# Run test\nmvn test                                         # Run application test\nmvn verify -Pnative                              # Execute native tests\n'})}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://quarkus.io/get-started/",children:"Get Started with Quarkus"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.udemy.com/course/quarkus-starting-with-quarkus/",children:"Starting with Quarkus by Antonio Goncalves"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://quarkus.io/guides/",children:"Quarkus Guides"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/quarkusio/quarkus-quickstarts",children:"Quarkus Quickstarts"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://quarkus.io/guides/config-reference",children:"Configuration Reference Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://quarkus.io/guides/all-config",children:"All configuration options"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/quarkiverse",children:"Quarkiverse Hub"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const r={},a=s.createContext(r);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);