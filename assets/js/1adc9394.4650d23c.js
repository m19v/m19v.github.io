"use strict";(self.webpackChunkm_19_v=self.webpackChunkm_19_v||[]).push([[5533],{2132:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var o=s(2451),t=s(4848),i=s(8453);const r={slug:"how-to-add-giscus-to-docusaurus",title:"How to add Giscus comments to Docusaurus",authors:"m19v",tags:["docusaurus","giscus","commenting-system","how-to"],enableComments:!0,countApiKey:"d6943a35-55d6-495e-8f03-92600d04b1f1"},c=void 0,a={authorsImageUrls:[void 0]},l=[{value:"Goal",id:"goal",level:2},{value:"Setup Giscus",id:"setup-giscus",level:2},{value:"Enable GitHub discussion",id:"enable-github-discussion",level:3},{value:"Enable Giscus",id:"enable-giscus",level:3},{value:"Get repository API key",id:"get-repository-api-key",level:3},{value:"Create Giscus component",id:"create-giscus-component",level:2},{value:"Create BlogPostItem component",id:"create-blogpostitem-component",level:2},{value:"References",id:"references",level:2}];function u(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"goal",children:"Goal"}),"\n",(0,t.jsxs)(n.p,{children:["This post is a step-by-step description of how to add ",(0,t.jsx)(n.a,{href:"https://giscus.app/",children:"Giscus"}),", a commenting system powered by GitHub Discussions, to a static website generated by Docusaurus."]}),"\n",(0,t.jsx)(n.h2,{id:"setup-giscus",children:"Setup Giscus"}),"\n",(0,t.jsx)(n.p,{children:"Follow the steps in the sections of the current chapter to set up Giscus and connect it to the GitHub discussions."}),"\n",(0,t.jsx)(n.h3,{id:"enable-github-discussion",children:"Enable GitHub discussion"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create Github repository in your Github account where comments are stored in Discussion section."}),"\n",(0,t.jsx)(n.li,{children:"In the main page of created repository go to Settings."}),"\n",(0,t.jsx)(n.li,{children:'Under "Features" section, click "Set up discussions".'}),"\n",(0,t.jsx)(n.li,{children:'Edit the template in "Start a new discussion" and click "Start discussion".'}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"enable-giscus",children:"Enable Giscus"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/apps/giscus",children:"Configure"})," giscus in your GitHub account."]}),"\n",(0,t.jsxs)(n.li,{children:['In Section "Repository access" add ',(0,t.jsx)(n.strong,{children:"only"}),' created repository from previous step to be accessed by giscus and click "Save".']}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"get-repository-api-key",children:"Get repository API key"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Login with GitHub account in ",(0,t.jsx)(n.a,{href:"https://docs.github.com/en/graphql/overview/explorer",children:"GraphQL API Explorer"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use following query to fetch the id of created repository, discussion categories with its details (e.g. id and name). ",(0,t.jsx)(n.strong,{children:"Note!"})," Replace ",(0,t.jsx)(n.code,{children:"owner"})," and ",(0,t.jsx)(n.code,{children:"name"})," with your GitHub account name and name of repository you created."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'query { \n  repository(owner: "nameOfYourGitHubAccount", name:"nameOfCreatedRepository"){\n    id\n    discussionCategories(first:10) {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The result json object will be similar to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "repository": {\n      "id": "R_kgDOIVqhTg",\n      "discussionCategories": {\n        "edges": [\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSES",\n              "name": "Announcements"\n            }\n          },\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSET",\n              "name": "General"\n            }\n          },\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSEV",\n              "name": "Ideas"\n            }\n          },\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSEX",\n              "name": "Polls"\n            }\n          },\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSEU",\n              "name": "Q&A"\n            }\n          },\n          {\n            "node": {\n              "id": "DIC_kwDOIVqhTs4CSSEW",\n              "name": "Show and tell"\n            }\n          }\n        ]\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"create-giscus-component",children:"Create Giscus component"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Install @giscus/react package"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm i @giscus/react\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create Giscus Component, e.g. under ",(0,t.jsx)(n.code,{children:"/src/components/GiscusComponent"})," as follows:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import React from \'react\';\nimport Giscus from "@giscus/react";\nimport { useColorMode } from \'@docusaurus/theme-common\';\n\nexport default function GiscusComponent() {\n  const { colorMode } = useColorMode();\n\n  return (\n    <Giscus    \n      repo="nameOfYourGitHubAccount/nameOfCreatedRepository"\n      repoId="idOfCreatedRepo"\n      category="General"\n      categoryId="IdOfDiscussionCategory"  // E.g. id of "General"\n      mapping="url"                        // Important! To map comments to URL\n      term="Welcome to @giscus/react component!"\n      strict="0"\n      reactionsEnabled="1"\n      emitMetadata="1"\n      inputPosition="top"\n      theme={colorMode}\n      lang="en"\n      loading="lazy"\n      crossorigin="anonymous"\n      async\n    />\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"create-blogpostitem-component",children:"Create BlogPostItem component"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create BlogPostItem component to wrap blog posts with Giscus commenting system as follows:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run swizzle [theme name] [component name] -- --wrap\n\n# Example:\nnpm run swizzle @docusaurus/theme-classic BlogPostItem -- --wrap\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will create a BlogPostItem component under ",(0,t.jsx)(n.code,{children:"src/theme"}),". Edit ",(0,t.jsx)(n.code,{children:"index.js"})," as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import React from 'react';\nimport { useBlogPost } from '@docusaurus/theme-common/internal'\nimport BlogPostItem from '@theme-original/BlogPostItem';\nimport GiscusComponent from '@site/src/components/GiscusComponent';\nimport useIsBrowser from '@docusaurus/useIsBrowser';\n\nexport default function BlogPostItemWrapper(props) {\n  const { metadata, isBlogPostPage } = useBlogPost()\n  const isBrowser = useIsBrowser();\n\n  const { frontMatter, slug, title } = metadata\n  const { enableComments } = frontMatter\n\n  return (\n    <>\n      <BlogPostItem {...props} />\n      {(enableComments && isBlogPostPage) && (\n        <GiscusComponent />\n      )}\n    </>\n  );\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"})," that the ",(0,t.jsx)(n.code,{children:"useBlogPost()"})," Hook is used in BlogPostItem component to make activation of comments per blog post configurable. The key value ",(0,t.jsx)(n.code,{children:"enableComments: true"}),"  must be added to your blog post ",(0,t.jsx)(n.code,{children:"md"})," file in order to activate commenting for it. E.g.:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"---\ntitle: Title of blog post\nauthors: author\ntags: [keywordOne, keywordTwo]\nenableComments: true # for Gisqus\n---\n"})}),"\n",(0,t.jsx)(n.p,{children:'I have enabled the comment function in the current post, which can be used as a demo. Feel free to hit the "Like" button if you found this post helpful, or post your question in the comment if you have one.'}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://giscus.app/",children:"giscus.app"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"https://graphql.org/",children:"graphql.org"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"https://dev.to/melvnl/add-comment-system-to-your-static-site-with-giscus-482o",children:"Add comment system to your static site with Giscus"})]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},2451:e=>{e.exports=JSON.parse('{"permalink":"/blog/how-to-add-giscus-to-docusaurus","editUrl":"https://github.com/m19v/m19v.github.io/blob/main/blog/2022-09-05-how-to-add-giscuss-to-docusaurus.md","source":"@site/blog/2022-09-05-how-to-add-giscuss-to-docusaurus.md","title":"How to add Giscus comments to Docusaurus","description":"Goal","date":"2022-09-05T00:00:00.000Z","tags":[{"inline":true,"label":"docusaurus","permalink":"/blog/tags/docusaurus"},{"inline":true,"label":"giscus","permalink":"/blog/tags/giscus"},{"inline":true,"label":"commenting-system","permalink":"/blog/tags/commenting-system"},{"inline":true,"label":"how-to","permalink":"/blog/tags/how-to"}],"readingTime":2.84,"hasTruncateMarker":true,"authors":[{"name":"m19v","title":"Software Engineer","url":"https://github.com/m19v","page":{"permalink":"/blog/authors/about"},"socials":{"x":"https://x.com/mnineteenv","linkedin":"https://www.linkedin.com/in/m19v/","github":"https://github.com/m19v"},"imageURL":"https://github.com/m19v.png","key":"m19v"}],"frontMatter":{"slug":"how-to-add-giscus-to-docusaurus","title":"How to add Giscus comments to Docusaurus","authors":"m19v","tags":["docusaurus","giscus","commenting-system","how-to"],"enableComments":true,"countApiKey":"d6943a35-55d6-495e-8f03-92600d04b1f1"},"unlisted":false,"prevItem":{"title":"How to bind SonarLint with SonarQube in IntelliJ IDE","permalink":"/blog/how-to-bind-sonarlint-with-sonarqube-in-intellij-ide"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var o=s(6540);const t={},i=o.createContext(t);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);